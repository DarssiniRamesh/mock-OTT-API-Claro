{"is_source_file": true, "format": "JavaScript", "description": "This script initializes the MongoDB database for the geolocation component by creating collections, indexes, and optionally resetting or seeding the database.", "external_files": ["../config/database", "../config", "../utils/logger", "./seed", "../models/Region", "../models/Country", "../models/City", "../models/RegionConfig"], "external_methods": ["connectDB", "disconnectDB", "seed", "Region.syncIndexes", "Country.syncIndexes", "City.syncIndexes", "RegionConfig.syncIndexes"], "published": ["initializeDatabase"], "classes": [], "methods": [{"name": "resetDatabase", "description": "Resets the database by dropping all collections."}, {"name": "createCollections", "description": "Creates collections and ensures indexes for the geolocation component are present."}, {"name": "initializeDatabase", "description": "Main function that initializes the database, handling reset and seed operations based on command line arguments."}], "calls": ["logger.info", "logger.error", "mongoose.connection.db.collections", "collection.drop", "Region.syncIndexes", "Country.syncIndexes", "City.syncIndexes", "RegionConfig.syncIndexes", "connectDB", "disconnectDB"], "search-terms": ["database initialization", "MongoDB setup", "geolocation component"], "state": 2, "file_id": 41, "knowledge_revision": 103, "git_revision": "", "ctags": [{"_type": "tag", "name": "City", "path": "/home/kavia/workspace/mock-OTT-API-Claro/src/scripts/init-db.js", "pattern": "/^    const City = require('..\\/models\\/City');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "Country", "path": "/home/kavia/workspace/mock-OTT-API-Claro/src/scripts/init-db.js", "pattern": "/^    const Country = require('..\\/models\\/Country');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "Region", "path": "/home/kavia/workspace/mock-OTT-API-Claro/src/scripts/init-db.js", "pattern": "/^    const Region = require('..\\/models\\/Region');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "RegionConfig", "path": "/home/kavia/workspace/mock-OTT-API-Claro/src/scripts/init-db.js", "pattern": "/^    const RegionConfig = require('..\\/models\\/RegionConfig');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "args", "path": "/home/kavia/workspace/mock-OTT-API-Claro/src/scripts/init-db.js", "pattern": "/^const args = process.argv.slice(2);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "collections", "path": "/home/kavia/workspace/mock-OTT-API-Claro/src/scripts/init-db.js", "pattern": "/^    const collections = await mongoose.connection.db.collections();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "config", "path": "/home/kavia/workspace/mock-OTT-API-Claro/src/scripts/init-db.js", "pattern": "/^const config = require('..\\/config');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "createCollections", "path": "/home/kavia/workspace/mock-OTT-API-Claro/src/scripts/init-db.js", "pattern": "/^const createCollections = async () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "createSuccess", "path": "/home/kavia/workspace/mock-OTT-API-Claro/src/scripts/init-db.js", "pattern": "/^    const createSuccess = await createCollections();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "initializeDatabase", "path": "/home/kavia/workspace/mock-OTT-API-Claro/src/scripts/init-db.js", "pattern": "/^const initializeDatabase = async () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "initializeDatabase", "path": "/home/kavia/workspace/mock-OTT-API-Claro/src/scripts/init-db.js", "pattern": "/^module.exports = { initializeDatabase };$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/mock-OTT-API-Claro/src/scripts/init-db.js", "pattern": "/^const logger = require('..\\/utils\\/logger');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "mongoose", "path": "/home/kavia/workspace/mock-OTT-API-Claro/src/scripts/init-db.js", "pattern": "/^const mongoose = require('mongoose');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "resetDatabase", "path": "/home/kavia/workspace/mock-OTT-API-Claro/src/scripts/init-db.js", "pattern": "/^const resetDatabase = async () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "resetSuccess", "path": "/home/kavia/workspace/mock-OTT-API-Claro/src/scripts/init-db.js", "pattern": "/^      const resetSuccess = await resetDatabase();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "shouldReset", "path": "/home/kavia/workspace/mock-OTT-API-Claro/src/scripts/init-db.js", "pattern": "/^const shouldReset = args.includes('--reset');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "shouldSeed", "path": "/home/kavia/workspace/mock-OTT-API-Claro/src/scripts/init-db.js", "pattern": "/^const shouldSeed = args.includes('--seed');$/", "language": "JavaScript", "kind": "constant"}], "filename": "/home/kavia/workspace/mock-OTT-API-Claro/src/scripts/init-db.js", "hash": "a6d3eaee198f7cdf830a68f587091c30", "format-version": 4, "code-base-name": "default", "fields": [{"name": "module.exports = { initializeDatabase };", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"103": ""}]}